<html>
	<head>
    <!-- CSS -->
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins">
    <link rel="stylesheet" type="text/css" href="/css/style.css" /> 
    <link rel=¨stylesheet¨ type=¨text/css¨ href=¨../../../public/assets/css/dropdown.css¨>
    <!-- JS -->
    <script type="text/javascript" src="/js/style.js"></script>
		<link rel=¨stylesheet¨ type=¨text/css¨ href=¨../../../public/assets/js/dropdown.js¨>
			 //<!--
			    function toggle_visibility(id) {
			       var e = document.getElementById(id);
			       	if(e.style.display == 'block')
			        	e.style.display = 'none';
			       	else
			        	e.style.display = 'block';
			    }
			//-->
    </script>
	</head>
	<body>

    <!-- Sidebar/menu -->
    
    <nav class="w3-sidebar w3-red w3-collapse w3-top w3-large w3-padding" style="z-index:3;width:300px;font-weight:bold;"
      id="mySidebar"><br>
      <a href="javascript:void(0)" onclick="w3_close()" class="w3-button w3-hide-large w3-display-topleft" style="width:100%;font-size:22px">Close
        Menu</a>
      <div class="w3-container">
        <h3 class="w3-padding-64"><b>Fake News<br>Database</b></h3>
      </div>
      <div class="w3-bar-block">
        <a href="#" onclick="w3_close()" class="w3-bar-item w3-button w3-hover-white">Home</a>
        <a href="/fakenews/insert" onclick="w3_close()" class="w3-bar-item w3-button w3-hover-white">Create fake news</a>
        <a href="/fakenews/list" onclick="w3_close()" class="w3-bar-item w3-button w3-hover-white">Show fake news</a>
        <a href="/file/insert" onclick="w3_close()" class="w3-bar-item w3-button w3-hover-white">Insert file</a>
        <a href="/file/list" onclick="w3_close()" class="w3-bar-item w3-button w3-hover-white">Show files</a>
        <a href="/user/insert" onclick="w3_close()" class="w3-bar-item w3-button w3-hover-white">Create user</a>
        <a href="/user/list" onclick="w3_close()" class="w3-bar-item w3-button w3-hover-white">Show users</a>
      </div>
    </nav>
	
    <div class="w3-main" style="margin-left:340px;margin-right:40px">
      <h1 class="w3-jumbo">ALL FILES</h1>
      <%for(var i = 0; i < files.rows.length; i++){%>
        <tr>
          <!-- Display all data-->
          <td>Código : <%= files.rows[i].id %></td><br>
          <td>Name : <%= files.rows[i].name %></td><br>
          <td>Extensão  : <%= files.rows[i].extension %></td><br>
          <td>Fake_news_title  : <%= files.rows[i].fake_news_title %></td><br>
          
          <!-- Check if extension is audio and display audio tag -->
          <%if(files.rows[i].extension == 'audio/mpeg'){%>
            <audio src="/uploads/<%= files.rows[i].name %>" controls>
              <p>Seu navegador não suporta o elemento audio </p>
            </audio>

          <!-- Check if extension is video and display video tag -->
          <%} else if (files.rows[i].extension == 'video/mp4'){%>
            <video width="320" height="240" controls>
              <source src="/uploads/<%= files.rows[i].name %>" type="video/mp4">
            </video>

          <!-- Only possibility is image, so display image tag -->
          <%} else{%>
            <img src="/uploads/<%= files.rows[i].name %>" height="100" width="150" alt = "/uploads/<%= files.rows[i].name %>">
          <% } %>

          <!-- Update buttom-->
          <div id="update_fake_news_<%= files.rows[i].id %>" class = "popStyle">
            <div class="popupBoxWrapper">
              <div class="popupBoxContent">
              
                <!-- Update form-->
                <form class="fileupload" action="edit/file" method="post" enctype="multipart/form-data">
                  <h1>Update here (leave it blank if have some data that you don't want to update)</h1>

                  <!-- invisble input with file id -->
                  <input type="text" name="id" value = "<%= files.rows[i].id %>" style = "display:none;" >

                  <!-- name input to write file name -->
                  <h3> Name : </h3><input type="text" name="name" placeholder="<%= files.rows[i].name %>"><br>

                  <!-- fake news id input to write fake news id -->
                  <h3> Fake news id : </h3><input type="text" name="fake_news_id" placeholder="<%= files.rows[i].fake_news_title %>"><br>
                  
                  <!-- file input to upload file -->
                  <h3> File : </h3><input type="file" name="upfile" value="" placeholder=""><br><br>

                  <h3> Delete : </h3><input type="checkbox" name="delete" value="" placeholder=""><br><br>

                  <!-- submit button  -->
                  <input type="submit"/>
                </form>

                  
                <!-- Exit button -->
                <p><a href="javascript:void(0)" onclick="toggle_visibility('update_fake_news_<%= files.rows[i].id %>');">Exit</a></p>
              </div>
            </div>
          </div>
          
          <!-- Update button -->
          <div id="wrapper">
            <p><a href="javascript:void(0)" onclick="toggle_visibility('update_fake_news_<%= files.rows[i].id %>');">Edit</a></p>
          </div>

          <br>
          <br>
        </tr>
      <%}%>
    </div>
</html>